# 图表功能使用指南

## 🆕 新功能：交易时间序列图表

现在你可以按照市场（event）查看交易的 YES/NO 按照买入时间和价格的可视化图表！

## 📊 功能特点

### 1. 交易时间序列分析
- **价格趋势图**：显示买入/卖出的价格随时间变化
- **数量柱状图**：显示每笔交易的数量大小
- **交互式图表**：可以放大、缩小、悬停查看详情

### 2. 市场对比分析
- **你 vs 其他人**：在同一市场中，高亮显示你的交易
- **排名统计**：显示你在该市场的交易排名
- **整体分布**：查看市场所有交易的分布情况

## 🚀 如何使用

### 方法 1：Web Dashboard（推荐）

```bash
# 1. 启动 Dashboard
./run_address_tracking.sh

# 2. 在浏览器打开 http://localhost:8502
```

**操作步骤**：
1. 在侧边栏选择 **"📊 图表分析模式"**
2. 输入要追踪的地址（例如：`0x6031b6eed1c97e853c6e0f03ad3ce3529351f96d`）
3. 点击 **"🔍 追踪并分析"** 按钮
4. 从下拉列表中选择要查看的市场
5. 在两个标签页中切换：
   - **📊 我的交易分析**：查看你的交易时间序列
   - **🔄 市场对比分析**：查看你在市场中的位置

### 方法 2：生成静态 HTML 图表

```bash
# 运行测试脚本
python test_chart_visualization.py
```

这会生成两个 HTML 文件：
- `address_tracking_chart.html` - 个人交易时间序列
- `market_comparison_chart.html` - 市场交易对比

在浏览器中打开这些文件即可查看交互式图表。

## 📈 图表说明

### 交易时间序列图

**上半部分：价格趋势**
- 🟢 绿色三角形向上 = 买入交易
- 🔴 红色三角形向下 = 卖出交易
- 虚线 = 价格趋势线
- 点的大小 = 交易数量大小

**下半部分：数量柱状图**
- 绿色向上柱 = 买入数量
- 红色向下柱 = 卖出数量

### 市场对比图

- ⚪ 浅色小点 = 其他交易者的交易
- ⭐ 星形大点 = 你的交易（高亮显示）
- 绿色 = 买入
- 红色 = 卖出

## 💡 使用技巧

### 1. 查看交易模式
通过图表可以发现：
- 在什么价格区间频繁买入/卖出
- 交易时间的规律（是否集中在某个时段）
- 价格波动与交易决策的关系

### 2. 与市场对比
通过对比图可以了解：
- 你的入场时机是否合适
- 你的交易价格是否有优势
- 市场的整体交易活跃度

### 3. 优化策略
根据图表分析：
- 识别成功/失败的交易模式
- 发现最佳入场价格区间
- 调整交易时间点

## 📊 示例分析

### 示例 1：识别价格区间

```
如果图表显示：
- 大部分买入在 $0.40-$0.50 之间
- 大部分卖出在 $0.55-$0.65 之间

说明：这是一个低买高卖的策略
```

### 示例 2：交易频率分析

```
如果图表显示：
- 交易集中在某个时间段（如开盘后30分钟）

说明：可能在追踪特定的市场时机
```

### 示例 3：市场地位

```
如果对比图显示：
- 你的交易量在市场中排名前 10%

说明：你是该市场的主要参与者之一
```

## 🎯 实际应用场景

### 场景 1：学习高手策略

1. 找到一个盈利的地址
2. 查看他的交易图表
3. 分析他的入场时机和价格
4. 学习他的交易模式

### 场景 2：自我分析

1. 追踪自己的地址
2. 查看每个市场的交易图表
3. 识别成功和失败的模式
4. 优化未来的交易策略

### 场景 3：市场研究

1. 选择一个市场
2. 查看所有交易的分布
3. 找出主要交易者
4. 分析市场的买卖压力

## 🔧 技术细节

### 图表库
使用 Plotly 创建交互式图表，支持：
- 缩放和平移
- 悬停显示详情
- 图例切换
- 响应式设计

### 数据来源
- 个人交易：`https://data-api.polymarket.com/trades?address={address}`
- 市场交易：`https://data-api.polymarket.com/trades?market={condition_id}`

### 性能优化
- 默认限制返回 100-200 笔交易
- 异步加载数据
- 缓存已加载的数据

## ❓ 常见问题

### Q1: 为什么看不到图表？

A: 确保：
1. 已安装 plotly：`pip install plotly`
2. 浏览器支持 JavaScript
3. 有足够的交易数据

### Q2: 图表显示不完整？

A: 可能原因：
1. 交易数据太多，被限制了
2. 可以调整 `limit` 参数获取更多数据
3. 某些时间段没有交易数据

### Q3: 如何区分 YES 和 NO？

A: 当前版本通过价格判断：
- 价格接近 1.0 的通常是 YES
- 价格接近 0.0 的通常是 NO
- 未来版本会添加更明确的标识

### Q4: 可以导出图表吗？

A: 可以！
1. Dashboard 中的图表可以右上角下载为 PNG
2. 运行测试脚本会生成 HTML 文件
3. HTML 文件可以在任何浏览器中打开

## 🚀 未来计划

### 即将推出
- [ ] 更清晰的 YES/NO 标识
- [ ] 盈亏计算和显示
- [ ] 胜率统计
- [ ] K线图模式

### 考虑中
- [ ] 实时更新图表
- [ ] 多个地址对比
- [ ] 自定义时间范围筛选
- [ ] 导出为 PDF 报表

## 📚 相关文档

- [地址追踪功能文档](docs/ADDRESS_TRACKING.md)
- [功能总结](ADDRESS_TRACKING_SUMMARY.md)
- [使用示例](example_address_tracking.py)

---

**更新时间**: 2025-12-26  
**版本**: 1.1

